<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Sound System Workflow (Mobile)</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Urbanist:wght@300;400;500;700&family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    
    <!-- MAIN PRESENTATION STYLE -->
    <style>
        * { box-sizing: border-box; margin: 0; padding: 0; }
        html, body { height: 100%; width: 100%; overflow: hidden; }
        body {
            background-color: #0a0a0a;
            display: flex; 
            justify-content: center;
            align-items: center;
            font-family: 'Urbanist', sans-serif;
            color: #e0e0e0;
        }

        .slide-container {
            display: none; width: 100%; height: 100%;
            background-color: #121212; position: relative;
            overflow-y: auto; overflow-x: hidden;
            flex-direction: column; padding: 60px;
            border: 1px solid #333;
            animation: fadeIn 0.4s ease-in-out;
        }
        .slide-container.active { display: flex; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        .slide-container::before {
            content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background-image: linear-gradient(rgba(18, 18, 18, 0.9), rgba(18, 18, 18, 0.95)),
            url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23222' fill-opacity='1'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
            z-index: 0; pointer-events: none;
        }
        .slide-container > * { position: relative; z-index: 1; }

        h1, h2, h3 { font-weight: 700; color: #ffffff; line-height: 1.1; }
        h1 { font-size: 56px; }
        h2 { font-size: 42px; margin-bottom: 25px; }
        h3 { font-size: 26px; color: #00ff9d; margin-bottom: 10px; }
        p, li, .subtitle { font-size: 18px; line-height: 1.6; color: #b0b0b0; }
        .subtitle { font-size: 22px; color: #00ff9d; font-weight: 300; margin-top: 15px; }

        ul { list-style: none; }
        li { margin-bottom: 12px; padding-left: 30px; position: relative; }
        li::before { content: '\f054'; font-family: 'Font Awesome 6 Free'; font-weight: 900; position: absolute; left: 0; color: #00ff9d; font-size: 16px; top: 4px; }

        .tech-font { font-family: 'JetBrains Mono', monospace; font-size: 14px; background: #222; padding: 4px 8px; border-radius: 4px; color: #ff3366; }

        .demo-btn {
            display: inline-block; margin-top: 25px; padding: 12px 25px;
            background: transparent; border: 2px solid #00ff9d; color: #00ff9d;
            font-weight: 700; text-decoration: none; border-radius: 50px;
            transition: all 0.3s ease; font-family: 'JetBrains Mono', monospace;
            font-size: 16px; cursor: pointer;
        }
        .demo-btn i { margin-right: 10px; }

        .content-area { display: flex; flex-direction: column; flex-grow: 1; justify-content: center; width: 100%; min-height: 0; }
        .two-column { display: grid; grid-template-columns: 1fr 1fr; gap: 40px; align-items: center; }
        .image-wrapper { width: 100%; height: auto; max-height: 300px; border-radius: 12px; overflow: hidden; box-shadow: 0 10px 30px rgba(0,0,0,0.5); border: 1px solid #333; }
        .image-wrapper img, .image-wrapper video { width: 100%; height: 100%; object-fit: cover; }
        .title-layout { text-align: center; display: flex; flex-direction: column; justify-content: center; height: 100%; border: 2px solid #00ff9d; border-radius: 12px; background: linear-gradient(135deg, rgba(0,255,157,0.05) 0%, rgba(0,0,0,0) 100%); }
        .title-layout h1 span { color: #00ff9d; }
        .tiled-content { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; }
        .tile { background: #1a1a1a; border: 1px solid #333; border-radius: 12px; padding: 30px; }
        .tile .icon { font-size: 40px; color: #00ff9d; margin-bottom: 20px; }
        .bleed-image-layout { padding: 0 !important; }
        .bleed-text-side { padding: 40px; }
        .bleed-image-side { width: 100%; height: 300px; object-fit: cover; mask-image: linear-gradient(to top, rgba(0,0,0,1) 80%, rgba(0,0,0,0)); }
        
        .nav-controls {
            position: fixed; bottom: 20px; right: 50%; transform: translateX(50%); display: flex; align-items: center; gap: 15px; z-index: 1000;
            background: #1a1a1a; padding: 10px 20px; border-radius: 50px; border: 1px solid #333; box-shadow: 0 5px 20px rgba(0,0,0,0.5);
        }
        .nav-btn { background: none; border: none; color: #fff; font-size: 18px; cursor: pointer; padding: 5px 10px; }
        .slide-counter { font-family: 'JetBrains Mono'; color: #666; font-size: 14px; }

        /* MOBILE OVERRIDES */
        @media (max-width: 768px) {
            .slide-container { padding: 40px 20px; }
            h1 { font-size: 42px; } h2 { font-size: 32px; } h3 { font-size: 24px; }
            p, li, .subtitle { font-size: 16px; }
            .two-column { grid-template-columns: 1fr; }
            .bleed-image-layout { display: flex; flex-direction: column-reverse; }
            .bleed-text-side { padding: 40px 20px; }
        }
    </style>
    
    <!-- SIMULATION OVERLAY STYLE -->
    <style>
        .simulation-overlay {
            position: fixed; top: 0; left: 0;
            width: 100%; height: 100%;
            background-color: rgba(0, 0, 0, 0.9);
            z-index: 2000;
            display: none; /* Hidden by default */
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 15px;
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
        }
        .simulation-overlay.active { display: flex; }
        .simulation-content {
            width: 100%; height: 100%;
            max-width: 1200px; max-height: 90vh;
            background-color: #111;
            border-radius: 10px;
            border: 1px solid #555;
            overflow: auto;
            position: relative;
        }
        .sim-close-btn {
            position: absolute; top: 15px; right: 15px;
            background: rgba(255,255,255,0.2);
            color: white; border: none; font-size: 24px;
            width: 40px; height: 40px; border-radius: 50%;
            cursor: pointer; z-index: 10;
        }
        .simulation-content > iframe {
            width: 100%; height: 100%;
            border: none; border-radius: 10px;
        }
    </style>

</head>
<body>

<!-- MAIN PRESENTATION SLIDES -->
<div id="presentation-main">
    <!-- Slide 1: Title -->
    <div class="slide-container active">
        <div class="title-layout">
            <h1>Sound System<br><span>Workflow</span></h1>
            <p class="subtitle">Pelatihan PIC Sound System PT. Cikarang Listrindo</p>
            <div style="margin-top: 40px; font-family: 'JetBrains Mono'; color: #666;">Fasilitator: Ahmad Supriyadi</div>
        </div>
    </div>

    <!-- Slide 2: AGENDA -->
    <div class="slide-container">
        <h2 class="slide-title">Agenda Pelatihan</h2>
        <div class="two-column">
            <div class="image-wrapper"><img src="https://images.unsplash.com/photo-1531403009284-440f080d1e12?q=80&w=2070&auto=format&fit=crop" alt="Workflow roadmap"></div>
            <div>
                <h3>Roadmap Materi</h3>
                <ul style="font-size: 22px; line-height: 1.7;">
                    <li><strong>1. Sekilas Teori Suara</strong></li>
                    <li><strong>2. Pra-Acara</strong></li>
                    <li><strong>3. Teknis Penggunaan Alat</strong></li>
                    <li><strong>4. Pasca Acara</strong></li>
                    <li><strong>5. Maintenance</strong></li>
                </ul>
            </div>
        </div>
    </div>

    <!-- Slide 3: Intro (Ripple Analogy) -->
    <div class="slide-container">
        <h2>The Ripple Effect</h2>
        <div class="two-column">
            <div>
                <h3>Bukan Angin, Tapi Energi</h3>
                <p>Suara bekerja seperti riak air. Molekul udara hanya bergetar di tempat, menghantarkan energi dari speaker ke telinga kita.</p>
                <button onclick="showSimulation('water_ripple.html')" class="demo-btn"><i class="fa-solid fa-water"></i> Buka Simulasi Air</button>
            </div>
            <div class="image-wrapper"><img src="gambar/ripple.png" alt="Riak air"></div>
        </div>
    </div>

    <!-- Slide 4: Propagation & Acoustics -->
    <div class="slide-container">
        <h2>Sound Propagation</h2>
        <div class="two-column">
            <div>
                <h3>Direct vs. Reflected</h3>
                <p>Suara menyebar dan berinteraksi dengan ruangan, menciptakan pantulan (Reflection) dan serapan (Absorption).</p>
                <div style="margin-top: 20px; padding: 15px; background: #222; border-left: 4px solid #00ff9d; border-radius: 4px;">
                    <p style="font-size: 16px; margin:0;">Fenomena pantulan ini yang ditiru di Mixer menjadi efek <em>Reverb</em> dan <em>Delay</em>.</p>
                </div>
                <button onclick="showSimulation('water_ripple.html')" class="demo-btn"><i class="fa-solid fa-layer-group"></i> Buka Simulasi Akustik</button>
            </div>
            <div class="image-wrapper"><img src="gambar/treatment.png" alt="Acoustic foam"></div>
        </div>
    </div>

    <!-- Slide 5: Theory (Freq & Amp) -->
    <div class="slide-container">
        <h2>Anatomy of Sound</h2>
        <div class="two-column">
            <div class="image-wrapper" style="border: none; box-shadow: none;">
                 <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/6/6d/Sine_waves_different_frequencies.svg/1200px-Sine_waves_different_frequencies.svg.png" style="object-fit: contain; filter: invert(1);" alt="Sound wave diagram">
            </div>
            <div>
                <h3>1. Frekuensi (Pitch)</h3><p>Diukur dalam <span class="tech-font">Hertz (Hz)</span>. Menentukan tinggi rendahnya nada.</p>
                <h3>2. Amplitudo (Loudness)</h3><p>Diukur dalam <span class="tech-font">Decibel (dB)</span>. Menentukan keras lemahnya suara.</p>
                <button onclick="showSimulation('sound_wave.html')" class="demo-btn"><i class="fa-solid fa-wave-square"></i> Buka Lab Frekuensi</button>
            </div>
        </div>
    </div>

    <!-- Slide 6: Harmonics & Timbre -->
    <div class="slide-container">
        <h2>Harmonics & Timbre</h2>
        <div class="two-column">
            <div class="image-wrapper"><img src="gambar/harmonic.png" alt="Wave summation"></div>
            <div>
                <h3>Bukan Sekadar Sinus</h3>
                <p>Suara alami (Vokal, Gitar) memiliki <strong>Warna Suara (Timbre)</strong> yang terbentuk dari nada dasar (Fundamental) dan kelipatannya (Harmonics).</p>
                <button onclick="showSimulation('harmonics_lab.html')" class="demo-btn" style="border-color: #ff3366; color: #ff3366;"><i class="fa-solid fa-chart-area"></i> Buka Lab Harmonik</button>
            </div>
        </div>
    </div>
    
    <!-- Slide 17: MIXER ANATOMY -->
    <div class="slide-container">
        <h2>Mixer Anatomy</h2>
        <p>Mixer terlihat rumit, padahal itu hanya <strong>satu channel yang dicopy-paste</strong>.</p>
        <div class="image-wrapper" style="height: auto; max-height: 60vh;">
            <img src="gambar/mixer.webp" alt="Audio mixer" style="object-fit: contain;">
        </div>
        <p style="text-align: center; margin-top: 15px;">
             <button onclick="showSimulation('mixer_sim.html')" class="demo-btn"><i class="fa-solid fa-sliders"></i> Buka Simulator Mixer</button>
        </p>
    </div>

    <!-- Add other slides here by removing extra details to keep it concise -->

    <!-- Slide 23: Q&A -->
    <div class="slide-container">
        <div class="qa-layout" style="width:100%; height: 100%; display:flex; flex-direction:column; justify-content:center; border:none;">
            <h2>Q & A</h2>
            <p>Terima kasih.</p>
        </div>
    </div>
</div>

<!-- NAVIGATION UI -->
<div class="nav-controls">
    <button class="nav-btn" onclick="changeSlide(-1)"><i class="fa-solid fa-chevron-left"></i></button>
    <span class="slide-counter" id="slideCounter">1 / 8</span>
    <button class="nav-btn" onclick="changeSlide(1)"><i class="fa-solid fa-chevron-right"></i></button>
</div>

<!-- SIMULATION OVERLAYS -->
<div id="simulation-container">
    <!-- The content of simulation HTMLs will be loaded here by script -->
</div>


<script>
    // --- SIMPLE SINGLE-PAGE NAVIGATION ---
    let currentSlideIndex = 0;
    const slides = document.querySelectorAll('#presentation-main .slide-container');
    const counterDisplay = document.getElementById('slideCounter');

    function showSlide(index) {
        if (index >= slides.length) index = 0;
        else if (index < 0) index = slides.length - 1;
        currentSlideIndex = index;

        slides.forEach(s => s.classList.remove('active'));
        slides[currentSlideIndex].classList.add('active');
        counterDisplay.innerText = `${currentSlideIndex + 1} / ${slides.length}`;
        sessionStorage.setItem('presentation_slide_index', currentSlideIndex);
    }

    function changeSlide(direction) {
        showSlide(currentSlideIndex + direction);
    }

    document.addEventListener('keydown', (e) => {
        if (document.querySelector('.simulation-overlay.active')) return;
        if (e.key === 'ArrowRight' || e.key === ' ') changeSlide(1);
        else if (e.key === 'ArrowLeft') changeSlide(-1);
    });

    // --- SIMULATION LOADER AND DISPLAY ---
    const simContainer = document.getElementById('simulation-container');
    const simCache = {};

    async function fetchAndCacheSim(url) {
        if (simCache[url]) return simCache[url];
        try {
            const response = await fetch(url);
            if (!response.ok) throw new Error(`Network response was not ok for ${url}`);
            const text = await response.text();
            simCache[url] = text;
            return text;
        } catch (error) {
            console.error('Failed to fetch simulation:', error);
            return `<div style="color:red; text-align:center; padding: 40px;"><h2>Error</h2><p>Gagal memuat simulasi dari ${url}.</p><p>Pastikan file tersebut berada di folder yang sama dengan file HTML utama.</p></div>`;
        }
    }
    
    async function showSimulation(url) {
        const simHtml = await fetchAndCacheSim(url);
        
        // Create overlay structure
        const overlay = document.createElement('div');
        overlay.className = 'simulation-overlay';
        overlay.id = `overlay-${url}`;

        const content = document.createElement('div');
        content.className = 'simulation-content';

        const closeBtn = document.createElement('button');
        closeBtn.className = 'sim-close-btn';
        closeBtn.innerHTML = '&times;';
        closeBtn.onclick = () => hideSimulation(url);

        // Use iframe to isolate simulation content (CSS and JS)
        const iframe = document.createElement('iframe');
        
        content.appendChild(closeBtn);
        content.appendChild(iframe);
        overlay.appendChild(content);
        simContainer.appendChild(overlay);

        // Write content to iframe
        iframe.contentWindow.document.open();
        iframe.contentWindow.document.write(simHtml);
        iframe.contentWindow.document.close();
        
        overlay.classList.add('active');
    }

    function hideSimulation(url) {
        const overlay = document.getElementById(`overlay-${url}`);
        if (overlay) {
            overlay.classList.remove('active');
            // Optional: remove from DOM after hiding to clean up
            setTimeout(() => {
                if (overlay.parentElement) {
                    overlay.parentElement.removeChild(overlay);
                }
            }, 300);
        }
    }

    // --- INIT ---
    document.addEventListener('DOMContentLoaded', () => {
        const savedIndex = sessionStorage.getItem('presentation_slide_index');
        showSlide(savedIndex ? parseInt(savedIndex) : 0);

        // Pre-fetch simulations for smoother experience
        ['water_ripple.html', 'sound_wave.html', 'harmonics_lab.html', 'mixer_sim.html'].forEach(fetchAndCacheSim);
    });

</script>

</body>
</html>
